var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),StepType;!function(t){t[t.wait=0]="wait",t[t.exec=1]="exec",t[t.block=2]="block"}(StepType||(StepType={}));var Step=function(){function t(){this.m_taskList=[]}return t.prototype.wait=function(t){var e=this;return this.m_taskList.push({type:StepType.wait,data:t}),egret.setTimeout(function(){e.check()},this,0),this},t.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.block=function(t,e){var i=this;return this.m_taskList.push({type:StepType.block,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.next=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.check()},t.prototype.clear=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.m_taskList.length=0},t.prototype.check=function(){if(!this.m_waitting&&this.m_taskList.length>0){var t=this.m_taskList.shift();this.checkTask(t)}},t.prototype.checkTask=function(t){t.type==StepType.wait?this.doWait(t):t.type==StepType.exec?this.doExec(t):t.type==StepType.block&&this.doBlock(t)},t.prototype.doWait=function(t){var e=this,i=t.data;this.m_waitting=!0,this.m_timeId=egret.setTimeout(function(){e.m_waitting=!1,e.check()},this,i)},t.prototype.doExec=function(t){var e=t.data.func,i=t.data.thisObj;e.call(i),this.check()},t.prototype.doBlock=function(t){this.m_waitting=!0;var e=t.data.func,i=t.data.thisObj;e.call(i)},t}();__reflect(Step.prototype,"Step");var Workflow=function(){function t(){this.m_step=new Step,this.m_list=[]}return t.prototype.addWait=function(t){this.m_list.push({type:StepType.wait,data:t})},t.prototype.addExec=function(t,e){this.m_list.push({type:StepType.exec,data:{func:t,thisObj:e}})},t.prototype.addBlock=function(t,e){this.m_list.push({type:StepType.block,data:{func:t,thisObj:e}})},t.prototype.run=function(){this.m_step.clear();for(var t=0;t<this.m_list.length;t++){var e=this.m_list[t];e.type==StepType.wait?this.m_step.wait(e.data):e.type==StepType.exec?this.m_step.exec(e.func,e.thisObj):e.type==StepType.block&&this.m_step.block(e.func,e.thisObj)}},t.prototype.next=function(){this.m_step.next()},t}();__reflect(Workflow.prototype,"Workflow");var Boat=function(t){function e(){var e=t.call(this)||this;return e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){var t=Source.createBitmapByName("buyu_7_png");this.addChild(t);var e=Source.createBitmapByName("face1_png");this.addChild(e),e.x=211.5;var i=Source.createBitmapByName("face2_png");this.addChild(i),i.x=210.5,i.y=4,i.visible=!1;var s=Source.createBitmapByName("face3_png");this.addChild(s),s.x=208.5,s.y=7,s.visible=!1},e.prototype.gotoAndStop=function(t){for(var e=1;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!0},e.LINEDEPTH=300,e}(egret.Sprite);__reflect(Boat.prototype,"Boat");var Main=function(t){function e(){var e=t.call(this)||this;return e._loadCount=0,e._speedY=40,e._count=0,e._resultArr=[0,2,3,1,2,0,0,2,1,3],e._countArr=[],e.isResourceLoadEnd=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.loadingView.x=(this.stage.stageWidth-this.loadingView.width)/2,this.loadingView.y=(this.stage.stageHeight-this.loadingView.height)/2,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onSceneLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this);var i,s=GetRequestObject();return null==s?void Println("请求数据为null，无法加载相应单元的数据"):null==s.assetsName||void 0==s.assetsName||""==s.assetsName?void Println("请求的assetsName为null，无法加载相应单元的数据"):(i=s.assetsName,e.sourceName=i,void RES.loadGroup(i))},e.prototype.onUnitLoadComplete=function(t){this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,Source.init(),this.startCreateScene()},e.prototype.onItemLoadError=function(t){Println("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){Println("Group:"+t.groupName+" has failed to load"),this.onSceneLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.stage.maxTouches=1;var t=new Fashing;this.addChild(t)},e.sourceName="",e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SoundPlayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},e.prototype.playRes=function(t,e,i){var s=this;void 0===e&&(e=1),void 0===i&&(i=1),Println("playRes key:"+t+" loop:"+e+" volume:"+i);var o={type:"playRes",data:{key:t,loop:e,volume:i}};return this.m_waitting?(this.m_taskList.push(o),egret.setTimeout(function(){s.check()},this,0)):this.doPlayRes(o),this},e.prototype.checkTask=function(e){t.prototype.checkTask.call(this,e),"playRes"==e.type&&this.doPlayRes(e)},e.prototype.doPlayRes=function(t){this.m_waitting=!0;var e=t.data.key;this._loop=t.data.loop,this._volume=t.data.volume,this.stopSound(),this._sound=RES.getRes(e),this._channel=this._sound.play(0,this._loop),this._channel.volume=this._volume,this._channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),Println("doPlayRes key:"+e+" sound:"+this._sound)},e.prototype.stopSound=function(){this._channel&&(this._channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this._channel.stop(),this._channel=null)},e.prototype.onPlayComplete=function(t){this.stopSound(),this.m_waitting=!1,this.check()},e.prototype.clear=function(){t.prototype.clear.call(this),this.stopSound()},e}(Step);__reflect(SoundPlayer.prototype,"SoundPlayer");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?s(o):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,s){function o(t){e.call(s,t)}function h(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Bird=function(t){function e(){var e=t.call(this)||this;return e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){this.load(this.initMovieClip)},e.prototype.initMovieClip=function(){var t=new egret.MovieClipDataFactory(this._mcData,this._mcTexture),e=new egret.MovieClip(t.generateMovieClipData("海鸥2"));this.addChild(e),e.gotoAndPlay(1,-1)},e.prototype.load=function(t){var e=0,i=this,s=function(){e++,2==e&&t.call(i)},o=new egret.URLLoader;o.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;this._mcTexture=e.data,s()},this),o.dataFormat=egret.URLLoaderDataFormat.TEXTURE;var h=new egret.URLRequest("resource/assets/mc/bird.png");o.load(h);var o=new egret.URLLoader;o.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;this._mcData=JSON.parse(e.data),s()},this),o.dataFormat=egret.URLLoaderDataFormat.TEXT;var h=new egret.URLRequest("resource/assets/mc/bird.json");o.load(h)},e}(egret.Sprite);__reflect(Bird.prototype,"Bird");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.graphics.beginFill(3368601,1),this.graphics.drawRect(0,0,1366,1024),this.graphics.endFill(),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textColor=16777215,this.textField.x=.5*(1366-this.textField.width),this.textField.y=.5*(1024-this.textField.height),this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+Math.round(t/e*100)+"%"},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Cloud=function(t){function e(){var e=t.call(this)||this;return e._time=40,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this._bird1=new Bird,this.addChild(this._bird1),this._bird1.alpha=0,this._bird1.x=0,this._bird1.y=100,this._bird1.scaleX=this._bird1.scaleY=.2,this._bird2=new Bird,this.addChild(this._bird2),this._bird2.alpha=0,this._bird2.x=900,this._bird2.y=150,this._bird2.scaleX=this._bird2.scaleY=.1,this._cloud1=Source.createBitmapByName("yun_0_png"),this.addChild(this._cloud1),this._cloud1.x=43,this._cloud1.y=185,this._cloud2=Source.createBitmapByName("yun_1_png"),this.addChild(this._cloud2),this._cloud2.x=397.5,this._cloud2.y=69,this._cloud3=Source.createBitmapByName("yun_2_png"),this.addChild(this._cloud3),this._cloud3.x=815,this._cloud3.y=122,this._cloud4=Source.createBitmapByName("yun_3_png"),this.addChild(this._cloud4),this._cloud4.x=1185.5,this._cloud4.y=137.5,this.start()},e.prototype.start=function(){egret.Tween.get(this._cloud1,{loop:!0}).to({x:-this._cloud1.width},(43+this._cloud1.width)*this._time*1e3/1366).to({x:1366},0).to({x:43},1323*this._time*1e3/1366),egret.Tween.get(this._cloud2,{loop:!0}).to({x:-this._cloud2.width},(397.5+this._cloud2.width)*this._time*1e3/1366).to({x:1366},0).to({x:397.5},968.5*this._time*1e3/1366),egret.Tween.get(this._cloud3,{loop:!0}).to({x:-this._cloud3.width},(815+this._cloud3.width)*this._time*1e3/1366).to({x:1366},0).to({x:815},551*this._time*1e3/1366),egret.Tween.get(this._cloud4,{loop:!0}).to({x:-this._cloud4.width},(1185.5+this._cloud4.width)*this._time*1e3/1366).to({x:1366},0).to({x:1185.5},180.5*this._time*1e3/1366),egret.Tween.get(this._bird1,{loop:!0}).wait(1e3*Math.round(5*Math.random())+5e3).to({alpha:1},500).to({y:200,x:200,scaleX:.5,scaleY:.5},1e4).to({y:100,x:400,scaleX:.2,scaleY:.2},1e4).to({alpha:0},500).to({y:100,x:0},0).wait(1e3*Math.round(5*Math.random())+5e3).to({alpha:1},500),egret.Tween.get(this._bird2,{loop:!0}).to({alpha:1},500).to({y:250,x:1100,scaleX:.4,scaleY:.4},1e4).to({y:100,x:1366,scaleX:.1,scaleY:.1},1e4).to({alpha:0},500).to({y:150,x:0},0).wait(1e3*Math.round(5*Math.random())+5e3).to({alpha:1},500)},e}(egret.Sprite);__reflect(Cloud.prototype,"Cloud");var CountLoves=function(t){function e(){var e=t.call(this)||this;return e.count=3,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("love_panel_png");this.addChild(t);var i=this.createBitmapByName("love_png");this.addChild(i),i.name="love",i.anchorOffsetX=-25,i.anchorOffsetY=-14,this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.name="mask",this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),this._topMask.anchorOffsetX=-25,this._topMask.anchorOffsetY=-14,i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=e.NUM||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.reset=function(){this.count=e.NUM,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.MOVEDIS=74,e.NUM=3,e}(egret.Sprite);__reflect(CountLoves.prototype,"CountLoves");var CountStars=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){var t=Source.createBitmapByName("buyu_1_png");this.addChild(t);var i=Source.createBitmapByName("buyu_0_png");this.addChild(i),this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=10||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.reset=function(){this.count=0,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.NUM=10,e.MOVEDIS=60,e}(egret.Sprite);__reflect(CountStars.prototype,"CountStars");var Fashing=function(t){function e(){var e=t.call(this)||this;if(e._boatDir=0,e._spedDir=0,e._tempX=0,e._count=0,e._isHit=!1,e.stage)e.initContent();else{var i=new egret.Timer(100,0);i.addEventListener(egret.TimerEvent.TIMER,e.timerFunc,e),i.start()}return e}return __extends(e,t),e.prototype.timerFunc=function(t){this.stage&&(t.currentTarget.stop(),this.initContent())},e.prototype.initContent=function(){this.stage.maxTouches=1;var t=this.stage.stageWidth,e=this.stage.stageHeight,i=Source.createBitmapByName("buyu_8_png");this.addChild(i);var s=new Cloud;this.addChild(s),this._boat=new Boat,this.addChild(this._boat),this._boat.x=531.5,this._boat.y=173;var o=Source.createBitmapByName("buyu_6_png");this.addChild(o),o.y=373.5,this._hookSp=new HookSp,this.addChild(this._hookSp),this._hookSp.x=this._boat.x,this._hookSp.y=this._boat.y,this._fishSp=new egret.Sprite,this.addChild(this._fishSp),this._fishSp.y=173;var h=new Paopao;this.addChild(h),this._loves=new CountLoves,this.addChild(this._loves),this._loves.x=29,this._loves.y=16,this._stars=new CountStars,this.addChild(this._stars),this._stars.x=755,this._stars.y=24,this._quit=Source.createBitmapByName("quit_png"),this.addChild(this._quit),this._quit.$touchEnabled=!0,this._quit.x=90,this._quit.y=941;var n=Source.createBitmapByName("success_2_png"),a=Source.createBitmapByName("success_1_png"),r=Source.createBitmapByName("fail_2_png");this._tryAgain=Source.createBitmapByName("fail_0_png"),this._fail=Source.createBitmapByName("fail_1_png"),this._win=Source.createBitmapByName("success_0_png"),this._topSp=new egret.Sprite,this.addChild(this._topSp),this._topSp.graphics.beginFill(0,.5),this._topSp.graphics.drawRect(0,0,1366,1024),this._topSp.graphics.endFill(),this._topSp.$touchEnabled=!0,this._topSp.addChild(n),n.name="caidai",n.y=68.48,n.visible=!1,this._topSp.addChild(this._fail),this._fail.name="fail",this._fail.x=885,this._fail.y=618,this._fail.visible=!1,this._topSp.addChild(this._win),this._win.name="win",this._win.x=843,this._win.y=629,this._win.visible=!1,this._topSp.addChild(a),a.name="successStar",a.x=324,a.y=157,a.visible=!1,this._topSp.addChild(r),r.name="failStar",r.x=324,r.y=157,r.visible=!1,this._topSp.addChild(this._tryAgain),this._tryAgain.name="tryAgain",this._tryAgain.x=568,this._tryAgain.y=787,this._tryAgain.visible=!1,this._tryAgain.$touchEnabled=!0,this._start=Source.createBitmapByName("start_png"),this.addChild(this._start),this._start.visible=!1,this._start.$touchEnabled=!0,this._start.x=.5*(t-this._start.width),this._start.y=.5*(e-this._start.height),this._timer=new egret.Timer(1e4,0),this._start.visible=!0,this._tipsSound=new SoundPlayer,this._bgSound=new SoundPlayer,this.initListener()},e.prototype.initListener=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._hookSp.addEventListener(egret.Event.COMPLETE,this.onEntableTouch,this),this._hookSp.addEventListener(egret.Event.CHANGE,this.onBoatChange,this),this._start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.start,this),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._tryAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replay,this),this._quit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQuit,this),this._topSp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStopEvent,this)},e.prototype.onQuit=function(t){t.stopImmediatePropagation()},e.prototype.onStopEvent=function(t){t.stopImmediatePropagation()},e.prototype.replay=function(t){t.stopImmediatePropagation(),Source.reArrange();for(var e=0;e<this._topSp.numChildren;e++)this._topSp.getChildAt(e).visible=!1;this._count=0,this._loves.reset(),this._stars.reset(),this._quit.visible=!0,this.start(null)},e.prototype.onTimer=function(t){this._tipsSound.clear(),this._tipsSound.playRes(Source.list[this._count%Source.images.length].audio)},e.prototype.start=function(t){t&&t.stopImmediatePropagation(),this._bgSound.clear(),this._bgSound.playRes("bgmusic_mp3",1e4,.1),this._start.visible=!1,this._topSp.visible=!1,this.showFish(this._count),this._timer.start()},e.prototype.onBoatChange=function(t){var e=this,i=this._hookSp.localToGlobal(this._hookSp.tempX,this._hookSp.tempY+300);if(this._isHit)this._hitFish.x=i.x,this._hitFish.y=i.y-173;else for(var s=0;s<this._fishSp.numChildren;s++){var o=this._fishSp.getChildAt(s),h=o.hitTestPoint(i.x,i.y,!0);if(h&&(this._hitFish=o,this._isHit=!0,this._timer.reset(),this._timer.stop()),h&&o.visible){if(this._hookSp.stop(),o.name==Source.images[this._count%Source.images.length].name){if(this._stars.add(),this._boat.gotoAndStop(2),this._stars.count>=10){this._timer.stop(),setTimeout(function(){e.addChild(e._loves),e.addChild(e._stars),e.addChild(e._quit),e._topSp.visible=!0,e._topSp.getChildByName("caidai").visible=!0,e._topSp.getChildByName("successStar").visible=!0,e._topSp.getChildByName("tryAgain").visible=!0,e._topSp.getChildByName("win").visible=!0},200);for(var s=0;s<this._fishSp.numChildren;s++){var n=this._fishSp.getChildAt(s);n.visible=!1}return}}else if(this._loves.cut(),this._boat.gotoAndStop(3),0==this._loves.count)return setTimeout(function(){e.addChild(e._loves),e.addChild(e._stars),e.addChild(e._quit),e._topSp.visible=!0,e._topSp.getChildByName("failStar").visible=!0,e._topSp.getChildByName("tryAgain").visible=!0,e._topSp.getChildByName("fail").visible=!0},200),void this._timer.stop();this.hideFish(o.name)}}},e.prototype.hideFish=function(t){for(var e=0;e<this._fishSp.numChildren;e++){var i=this._fishSp.getChildAt(e);i.name==t||egret.Tween.get(i).wait(100*e).to({scaleX:.2,scaleY:.2,alpha:0},500,egret.Ease.cubicIn)}egret.Tween.get(this).to({},2e3,egret.Ease.cubicIn).call(this.next)},e.prototype.next=function(){this._count++,this.showFish(this._count)},e.prototype.onEntableTouch=function(t){var e=this;this._hitFish&&egret.Tween.get(this._hitFish).to({alpha:0,scaleX:.2,scaleY:.2},500,egret.Ease.cubicIn).call(function(){e._timer.reset(),e._timer.start(),e._hitFish=null}),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.showFish=function(t){this._boat.gotoAndStop(1),this._tipsSound.clear(),this._tipsSound.playRes(Source.list[t%Source.images.length].audio);for(var e=[],i=0;i<Source.showNum;i++)e.push(Source.images[Source.questionList[t][i]]);for(;this._fishSp.numChildren>0;)this._fishSp.removeChildAt(0);for(var i=0;i<e.length;i++){var s=e[i];this._fishSp.addChild(s),s.smoothing=!0,s.x=250+300*i,s.y=500,s.alpha=0,s.visible=!0,s.scaleX=s.scaleY=.2,egret.Tween.removeTweens(s),egret.Tween.get(s).wait(100*i).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.cubicIn)}},e.prototype.onClick=function(t){this._isHit=!1,t.stageX!=this._boat.x&&(this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._tempX=t.stageX,t.stageX<this._boat.x?1==this._boatDir?(t.stageX<this._boat.x&&t.stageX>=this._boat.x-this._boat.width/2&&(this._spedDir=0),t.stageX<this._boat.x-this._boat.width/2&&t.stageX>=this._boat.x-this._boat.width&&(this._spedDir=1,this.flipH(this._boat,this._hookSp)),t.stageX<this._boat.x-this._boat.width&&(this._spedDir=0,this.flipH(this._boat,this._hookSp))):this._spedDir=0:0==this._boatDir?(t.stageX>this._boat.x&&t.stageX<=this._boat.x+this._boat.width/2&&(this._spedDir=1),t.stageX>=this._boat.x+this._boat.width/2&&t.stageX<=this._boat.x+this._boat.width&&(this._spedDir=0,this.flipH(this._boat,this._hookSp)),t.stageX>this._boat.x+this._boat.width&&(this._spedDir=1,this.flipH(this._boat,this._hookSp))):this._spedDir=1,this.addEventListener(egret.Event.ENTER_FRAME,this.onENTER_FRAME,this))},e.prototype.onENTER_FRAME=function(t){0==this._spedDir?(this._boat.x-=e.sped,this._hookSp.x=this._boat.x,this._boat.x<=this._tempX&&(this._hookSp.start(),this.removeEventListener(egret.Event.ENTER_FRAME,this.onENTER_FRAME,this))):(this._boat.x+=e.sped,this._hookSp.x=this._boat.x,this._boat.x>=this._tempX&&(this._hookSp.start(),this.removeEventListener(egret.Event.ENTER_FRAME,this.onENTER_FRAME,this)))},e.prototype.flipH=function(t,e){0==this._boatDir?(t.scaleX=-1,t.x+=t.width,e.scaleX=-1,e.x+=e.width,this._boatDir=1):(t.scaleX=1,t.x-=t.width,e.scaleX=1,e.x-=e.width,this._boatDir=0)},e.sped=20,e}(egret.Sprite);__reflect(Fashing.prototype,"Fashing");var HookSp=function(t){function e(){var e=t.call(this)||this;return e.tempX=0,e.tempY=0,e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){this.graphics.beginFill(16777215,0),this.graphics.drawRect(0,0,461,262),this.graphics.endFill();var t=new egret.Sprite;this.addChild(t),t.x=5,t.y=8,t.graphics.lineStyle(2,3355443),t.graphics.moveTo(0,0),t.graphics.lineTo(0,300),this.line=new egret.Sprite,this.addChild(this.line),this.line.x=5,this.line.y=308,this._hook=Source.createBitmapByName("鱼钩_png"),this.addChild(this._hook),this._hook.anchorOffsetX=14,this._hook.anchorOffsetY=5,this._hook.x=5,this._hook.y=308,this.tempX=this.line.x},e.prototype.start=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.lineIn,this)},e.prototype.stop=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.lineIn,this),this.addEventListener(egret.Event.ENTER_FRAME,this.lineBack,this)},e.prototype.lineIn=function(t){this.tempY+=e.SPEEDY,this.tempY>=e.LINEDEPTH&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.lineIn,this),this.addEventListener(egret.Event.ENTER_FRAME,this.lineBack,this)),this.line.graphics.clear(),this.line.graphics.lineStyle(2,0),this.line.graphics.moveTo(0,0),this.line.graphics.lineTo(0,this.tempY),this._hook.y=300+this.tempY,this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},e.prototype.lineBack=function(t){this.tempY-=e.SPEEDY,this.tempY<=0&&(this.tempY=0,this.removeEventListener(egret.Event.ENTER_FRAME,this.lineBack,this),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))),this.line.graphics.clear(),this.line.graphics.lineStyle(2,0),this.line.graphics.moveTo(0,0),this.line.graphics.lineTo(0,this.tempY),this._hook.y=300+this.tempY,this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},e.SPEEDY=5,e.LINEDEPTH=200,e}(egret.Sprite);__reflect(HookSp.prototype,"HookSp");var Paopao=function(t){function e(){var e=t.call(this)||this;return e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){for(var t=0;10>t;t++){var e=(Math.round(10*Math.random())+10,Source.createBitmapByName("泡泡_png"));this.addChild(e)}this.start()},e.prototype.start=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);e.alpha=0,e.scaleX=e.scaleY=.6+4*Math.random()*.1,e.x=1266*Math.random()+100,e.y=200*Math.random()+800,egret.Tween.get(e,{loop:!0}).wait(1e3*Math.round(10*Math.random())).to({alpha:1},300).to({y:100*Math.random()+350},3e3+1e3*Math.round(5*Math.random())).to({alpha:0},300)}},e.prototype.stop=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);egret.Tween.removeTweens(e)}},e}(egret.Sprite);__reflect(Paopao.prototype,"Paopao");var Source=function(){function t(){}return t.init=function(){var e=RES.getRes(Main.sourceName+"_json");this.list=e.items;for(var i=0;i<e.items.length;i++){var s=e.items[i].img,o=new egret.Bitmap(RES.getRes(s)),h=e.items[i].name;o.name=h,o.width=o.height=250,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,this.images.push(o)}for(var n=0;n<t.groups;n++){for(var a=[],r=0;r<this.images.length;r++)a.push(r);this.questionList.push(this.getQuestion(n%this.images.length,a))}},t.getQuestion=function(e,i){var s=[];s.push(i[e]),i.splice(e,1);for(var o=0;o<t.showNum-1;o++){var h=Math.floor(Math.random()*(i.length-o));0>h&&(h=0),s.push(i[h]),i.splice(h,1)}for(var n=[],a=0;a<t.showNum;a++){var r=Math.floor(Math.random()*(t.showNum-a));0>r&&(r=0),n.push(s[r]),s.splice(r,1)}return n},t.reArrange=function(){this.questionList=[];for(var e=0;e<t.groups;e++){for(var i=[],s=0;s<this.images.length;s++)i.push(s);this.questionList.push(this.getQuestion(e%this.images.length,i))}},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.groups=13,t.showNum=4,t.images=[],t.questionList=[],t}();__reflect(Source.prototype,"Source");