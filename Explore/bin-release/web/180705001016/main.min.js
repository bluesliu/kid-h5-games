var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),StepType;!function(t){t[t.wait=0]="wait",t[t.exec=1]="exec",t[t.block=2]="block"}(StepType||(StepType={}));var Step=function(){function t(){this.m_taskList=[]}return t.prototype.wait=function(t){var e=this;return this.m_taskList.push({type:StepType.wait,data:t}),egret.setTimeout(function(){e.check()},this,0),this},t.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.block=function(t,e){var i=this;return this.m_taskList.push({type:StepType.block,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.next=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.check()},t.prototype.clear=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.m_taskList.length=0},t.prototype.check=function(){if(!this.m_waitting&&this.m_taskList.length>0){var t=this.m_taskList.shift();this.checkTask(t)}},t.prototype.checkTask=function(t){t.type==StepType.wait?this.doWait(t):t.type==StepType.exec?this.doExec(t):t.type==StepType.block&&this.doBlock(t)},t.prototype.doWait=function(t){var e=this,i=t.data;this.m_waitting=!0,this.m_timeId=egret.setTimeout(function(){e.m_waitting=!1,e.check()},this,i)},t.prototype.doExec=function(t){var e=t.data.func,i=t.data.thisObj;e.call(i),this.check()},t.prototype.doBlock=function(t){this.m_waitting=!0;var e=t.data.func,i=t.data.thisObj;e.call(i)},t}();__reflect(Step.prototype,"Step");var Workflow=function(){function t(){this.m_step=new Step,this.m_list=[]}return t.prototype.addWait=function(t){this.m_list.push({type:StepType.wait,data:t})},t.prototype.addExec=function(t,e){this.m_list.push({type:StepType.exec,data:{func:t,thisObj:e}})},t.prototype.addBlock=function(t,e){this.m_list.push({type:StepType.block,data:{func:t,thisObj:e}})},t.prototype.run=function(){this.m_step.clear();for(var t=0;t<this.m_list.length;t++){var e=this.m_list[t];e.type==StepType.wait?this.m_step.wait(e.data):e.type==StepType.exec?this.m_step.exec(e.func,e.thisObj):e.type==StepType.block&&this.m_step.block(e.func,e.thisObj)}},t.prototype.next=function(){this.m_step.next()},t}();__reflect(Workflow.prototype,"Workflow");var QuestionCompoment=function(t){function e(){var e=t.call(this)||this;return e._allList=new Array,e._imgList=new Array,e._qIDArr=new Array,e._nowIDArr=new Array,e._itemArr=new Array,e._answerID=-1,e.root="data/",e.resGroupName="unit1",e.isResourceLoadEnd=!1,e._isStart=!1,e.answer=!1,e._index=0,e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){this.m_tipsSound=new SoundPlayer},e.prototype.createQuestion=function(t){this._index=t,egret.log("this._index:",this._index),this._isStart=!0;for(var e=250*this.numChildren,i=0;i<this.numChildren;i++)egret.Tween.get(this.getChildAt(i)).to({y:564,alpha:0},1e3,egret.Ease.quadInOut);egret.setTimeout(this.newQuestion,this,e)},e.prototype.newQuestion=function(){for(var t=this;this.numChildren>0;)this.removeChildAt(0);for(var e=function(e){var s=Source.questionList[i._index][e],o=Source.images[s],n=new CardComponent(e+1,o,s);n.name="item_"+s,n.x=120+400*e,n.y=150,n.alpha=0,i.addChild(n),n.$touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,i.cardClick,i),egret.setTimeout(function(e){egret.Tween.get(n).to({y:100,alpha:1},1e3,egret.Ease.quadInOut).call(function(){n.move()},t)},i,100*e)},i=this,s=0;s<Source.questionList[this._index].length;s++)e(s);this._answerID=this._index%Source.images.length,this.repeat()},e.prototype.repeat=function(){this.m_tipsSound.clear(),this.m_tipsSound.playRes(Source.list[this._answerID].audio)},e.prototype.cardClick=function(t){if(this._answerID==t.target.name.split("_")[1]?this.answer=!0:this.answer=!1,this.clickFun){var e=this.localToGlobal(t.target.x,t.target.y);this.clickFun.apply(this.parent,[e.x,e.y])}},e.prototype.reset=function(){for(;this.numChildren>0;)this.removeChildAt(0)},e}(egret.Sprite);__reflect(QuestionCompoment.prototype,"QuestionCompoment");var CountLoves=function(t){function e(){var e=t.call(this)||this;return e.count=3,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("love_panel_png");this.addChild(t);var i=this.createBitmapByName("love_png");this.addChild(i),i.name="love",i.anchorOffsetX=-25,i.anchorOffsetY=-14,this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.name="mask",this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),this._topMask.anchorOffsetX=-25,this._topMask.anchorOffsetY=-14,i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=e.NUM||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.reset=function(){this.count=e.NUM,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.MOVEDIS=74,e.NUM=3,e}(egret.Sprite);__reflect(CountLoves.prototype,"CountLoves");var CountStars=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){var t=PublicTool.createBitmapByName("grayScoring_png");this.addChild(t);var i=PublicTool.createBitmapByName("scoring_png");this.addChild(i),this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=10||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.reset=function(){this.count=0,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.NUM=10,e.MOVEDIS=60,e}(egret.Sprite);__reflect(CountStars.prototype,"CountStars");var DropCard=function(t){function e(){var e=t.call(this)||this;return e.count=3,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("yellow_box_png"),e=this.createBitmapByName("violet_box_png"),i=this.createBitmapByName("blue_box_png"),s=this.createBitmapByName("red_box_png");this.addChildCenter(t),this.addChildCenter(e),this.addChildCenter(i),this.addChildCenter(s)},e.prototype.addChildCenter=function(t){t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t)},e.prototype.setType=function(t){void 0===t&&(t=0);for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!0},e.prototype.add=function(t){for(;this.numChildren>4;)this.removeChildAt(4);t.width=t.height=150,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(DropCard.prototype,"DropCard");var EButton=function(t){function e(e,i,s,o,n,r,a,h){void 0===s&&(s=null),void 0===o&&(o=null),void 0===n&&(n=""),void 0===r&&(r=30),void 0===a&&(a=1),void 0===h&&(h="assets");var l=t.call(this)||this;return l.assets=RES.getRes("assets"),l.isPlayCartoon=!1,l.cartoonType=1,l.param={context:null,data:null},l.param.context=e,l.init(i,s,o,n,r,a,h),l}return __extends(e,t),e.prototype.init=function(t,e,i,s,o,n,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=""),void 0===o&&(o=30),void 0===n&&(n=1),void 0===r&&(r="assets"),this.cartoonType=n,this.beginFun=e,this.endFun=i,this.btnImg=new egret.Bitmap,null==r?this.btnImg.texture=RES.getRes(t):("assets"!=r&&(this.assets=RES.getRes(r)),this.btnImg.texture=this.assets.getTexture(t)),this.addChild(this.btnImg),""!=s&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=o,this.textField.textAlign="center",this.textField.stroke=1,this.textField.strokeColor=0,this.textField.text=s,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.touchChildren=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonBegin,this)},e.prototype.onButtonBegin=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0,this.startX||(this.startX=this.x,this.startY=this.y);t.target;null!=this.beginFun&&this.beginFun.apply(this.param.context,[this.param.data]),this.stage.once(egret.TouchEvent.TOUCH_END,this.onButtonTouchEnd,this),egret.Tween.get(this).to({scaleX:.8,scaleY:.8,x:this.startX+.1*this.btnImg.width,y:this.startY+.1*this.btnImg.height},100,egret.Ease.sineIn)}},e.prototype.onButtonTouchEnd=function(t){var e=(t.target,function(){this.isPlayCartoon=!1,null!=this.endFun&&this.endFun.apply(this.param.context,[this.param.data])});1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.startX,y:this.startY},500,egret.Ease.elasticOut).call(e,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.startX,y:this.startY},500,egret.Ease.backOut).call(e,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.startX,y:this.startY},100).call(e,this)},e.prototype.onbuttonTouchTap=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1,null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},i=function(){1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(e,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(e,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(e,this)};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(i,this)}},e.prototype.setBindData=function(t){this.param.data=t},e.prototype.getBindData=function(){return this.param.data},e.prototype.getBitmap=function(){return this.btnImg},e}(egret.Sprite);__reflect(EButton.prototype,"EButton");var EffectUtils;!function(t){function e(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var i=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this)}}function i(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function s(t,e){void 0===e&&(e=1e3),new BitmapBlink(t,e)}function o(t){var e=80,i=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:i},e)},this,5*e)}function n(t){void 0===t&&(t=1)}function r(t,e,i){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===i&&(i=!1),e){case 1:TipsUtils.showTipsDownToUp(t,i);break;case 2:TipsUtils.showTipsLeftOrRight(t,i,!0);break;case 3:TipsUtils.showTipsLeftOrRight(t,i,!1);break;case 4:TipsUtils.showTipsFromCenter(t,i);break;case 5:TipsUtils.showTipsBigToSmall(t,i)}}function a(t,e){if(void 0===e&&(e=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var i=function(){this.isPlayEffectPlay=!1},s=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(i,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(i,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(i,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(s,this)}}function h(t){var e=function(){if(null!=t){var i=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};e()}function l(t,e,i){void 0===i&&(i=50);var s=function(){if(null!=t){var o=function(){egret.Tween.get(t).to({y:t.y-i},e).call(s,this)};egret.Tween.get(t).to({y:t.y+i},e).call(o,this)}};s()}function c(t,e,i){void 0===i&&(i=20);var s=function(){if(null!=t){var o=function(){egret.Tween.get(t).to({rotation:-i},e).call(s,this)};egret.Tween.get(t).to({rotation:i},e).call(o,this)}};s()}function d(t,e,i){void 0===e&&(e=""),void 0===i&&(i=200);for(var s=e.split(""),o=s.length,n=0;o>n;n++)egret.setTimeout(function(){t.appendText(s[Number(this)])},n,i*n)}t.rotationEffect=e,t.removeRotationEffect=i,t.blinkEffect=s,t.shakeObj=o,t.shakeScreen=n,t.showTips=r;t.playEffect=a,t.playScaleEffect=h,t.flyObj=l,t.rockObj=c,t.typerEffect=d}(EffectUtils||(EffectUtils={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e._loadCount=0,e._speedY=40,e._count=0,e._resultArr=[0,2,3,1,2,0,0,2,1,3],e._countArr=[],e.isResourceLoadEnd=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.loadingView.x=(this.stage.stageWidth-this.loadingView.width)/2,this.loadingView.y=(this.stage.stageHeight-this.loadingView.height)/2,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onSceneLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this);var i,s=GetRequestObject();return null==s?void Println("请求数据为null，无法加载相应单元的数据"):null==s.assetsName||void 0==s.assetsName||""==s.assetsName?void Println("请求的assetsName为null，无法加载相应单元的数据"):(i=s.assetsName,e.sourceName=i,void RES.loadGroup(i))},e.prototype.onUnitLoadComplete=function(t){this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,Source.init(),this.startCreateScene()},e.prototype.onItemLoadError=function(t){Println("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){Println("Group:"+t.groupName+" has failed to load"),this.onSceneLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.stage.maxTouches=1;var t=new Adventurer;this.addChild(t)},e.sourceName="",e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var PublicTool=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.setXY=function(t,e,i){t.x=e/this.resWidth*this.stageWidth,t.y=i/this.resHeight*this.stageHeight},t.stageWidth=1366,t.stageHeight=1024,t.resWidth=1366,t.resHeight=1024,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t}();__reflect(PublicTool.prototype,"PublicTool");var CardComponent=function(t){function e(e,i,s){var o=t.call(this)||this;return o.qID=s,o.initContent(e,i),o.once(egret.Event.REMOVED_FROM_STAGE,o.onREMOVED_FROM_STAGE,o),o}return __extends(e,t),e.prototype.initContent=function(t,e){switch(this._bg=PublicTool.createBitmapByName("hudie"+t+"_png"),this.addChild(this._bg),this._img=e,t){case 1:this._img.x=12,this._img.y=190;break;case 3:this._img.x=61.5,this._img.y=140;break;case 2:this._img.x=47,this._img.y=215}this.addChild(this._img);var i=new egret.RenderTexture,s=new egret.Rectangle(0,0,this._bg.width,this._bg.height);i.drawToTexture(this,s),this._conSP=new egret.Bitmap,this._conSP.texture=i,this.removeChild(this._bg),this.removeChild(this._img),this.addChild(this._conSP),this.hitObj=new egret.Sprite,this.hitObj.graphics.beginFill(0,0),this.hitObj.graphics.drawRect(0,0,.5*this._bg.width,.5*this._bg.height),this.hitObj.graphics.endFill(),this.hitObj.x=.25*this._bg.width,this.hitObj.y=.25*this._bg.height,this.hitObj.cacheAsBitmap=!0,this.addChild(this.hitObj)},e.prototype.move=function(){var t=this,e=Math.floor(5*Math.random()+2);this.addEventListener(egret.Event.ENTER_FRAME,function(){t.y+=Math.sin(egret.getTimer()/1e3)/e},this)},e.prototype.onREMOVED_FROM_STAGE=function(t){this._bg,this._img,this.removeChild(this.hitObj)},e}(egret.Sprite);__reflect(CardComponent.prototype,"CardComponent");var SoundPlayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},e.prototype.playRes=function(t,e,i){var s=this;void 0===e&&(e=1),void 0===i&&(i=1),Println("playRes key:"+t+" loop:"+e+" volume:"+i);var o={type:"playRes",data:{key:t,loop:e,volume:i}};return this.m_waitting?(this.m_taskList.push(o),egret.setTimeout(function(){s.check()},this,0)):this.doPlayRes(o),this},e.prototype.checkTask=function(e){t.prototype.checkTask.call(this,e),"playRes"==e.type&&this.doPlayRes(e)},e.prototype.doPlayRes=function(t){this.m_waitting=!0;var e=t.data.key;this._loop=t.data.loop,this._volume=t.data.volume,this.stopSound(),this._sound=RES.getRes(e),this._channel=this._sound.play(0,this._loop),this._channel.volume=this._volume,this._channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this)},e.prototype.stopSound=function(){this._channel&&(this._channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this._channel.stop(),this._channel=null)},e.prototype.onPlayComplete=function(t){this.stopSound(),this.m_waitting=!1,this.check()},e.prototype.clear=function(){t.prototype.clear.call(this),this.stopSound()},e}(Step);__reflect(SoundPlayer.prototype,"SoundPlayer");var Adventurer=function(t){function e(){var e=t.call(this)||this;if(e._index=0,e._move=!1,e._speedX=5,e.stage)e.initContent();else{var i=new egret.Timer(100,0);i.addEventListener(egret.TimerEvent.TIMER,e.timerFunc,e),i.start()}return e}return __extends(e,t),e.prototype.timerFunc=function(t){this.stage&&(t.currentTarget.stop(),this.initContent())},e.prototype.initContent=function(){this._bg=new Bg,this.addChild(this._bg),this._question=new QuestionCompoment,this.addChild(this._question),this._qwd=new Qieadi,this.addChild(this._qwd),this._qwd.x=474,this._qwd.y=660,this._loves=new CountLoves,this.addChild(this._loves),this._loves.x=200,this._loves.y=16,this._stars=new CountStars,this.addChild(this._stars),this._stars.x=755,this._stars.y=24;var t=Source.createBitmapByName("success_2_png"),e=Source.createBitmapByName("success_0_png"),i=Source.createBitmapByName("fail_1_png"),s=Source.createBitmapByName("success_1_png"),o=Source.createBitmapByName("fail_2_png");this._tryAgain=Source.createBitmapByName("fail_0_png"),this._topSp=new egret.Sprite,this.addChild(this._topSp),this._topSp.graphics.beginFill(0,.5),this._topSp.graphics.drawRect(0,0,1366,1024),this._topSp.graphics.endFill(),this._topSp.visible=!1,this._topSp.$touchEnabled=!0,this._topSp.addChild(t),t.name="caidai",t.y=68.48,t.visible=!1,this._topSp.addChild(e),e.name="qwd2",e.x=843,e.y=629,e.visible=!1,this._topSp.addChild(i),i.name="qwd3",i.x=843,i.y=629,i.visible=!1,this._topSp.addChild(s),s.name="successStar",s.x=324,s.y=157,s.visible=!1,s.touchEnabled=!0,this._topSp.addChild(o),o.name="failStar",o.x=324,o.y=157,o.visible=!1,this._topSp.addChild(this._tryAgain),this._tryAgain.name="tryAgain",this._tryAgain.x=568,this._tryAgain.y=787,this._tryAgain.visible=!1,this._tryAgain.$touchEnabled=!0,this._startBG=new egret.Sprite,this._startBG.graphics.beginFill(0,.5),this._startBG.graphics.drawRect(0,0,PublicTool.stageWidth,PublicTool.stageHeight),this._startBG.graphics.endFill(),this._startBG.touchEnabled=!0,this.addChild(this._startBG),this._startBtn=new EButton(this,"start_png",null,null,"",30,3,null),this._startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnClick,this),this._startBtn.x=.5*(PublicTool.stageWidth-this._startBtn.width),this._startBtn.y=.5*(PublicTool.stageHeight-this._startBtn.height),this._startBG.addChild(this._startBtn),this.m_bgSound=new SoundPlayer,this._question.clickFun=this.cardClick,this.initListener()},e.prototype.initListener=function(){this._tryAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replay,this)},e.prototype.replay=function(t){t.stopImmediatePropagation(),Source.reArrange(),this._topSp.visible=!1;for(var e=0;e<this._topSp.numChildren;e++)this._topSp.getChildAt(e).visible=!1;this.m_bgSound.clear(),this.m_bgSound.playRes("bgmusic_mp3",0,.1),this._qwd.visible=!0,this._qwd.scaleX=1,this._qwd.x=474,this._qwd.y=660,this._index=0,this._loves.reset(),this._stars.reset(),this._question.reset(),this._question.visible=!0,this._question.createQuestion(this._index)},e.prototype.cardClick=function(t,e){this._move||(this._qwd.x>=t?(this._left=!0,1!=this._qwd.scaleX&&(this._qwd.scaleX=1,this._qwd.x=this._qwd.x-this._qwd.width)):(this._left=!1,1==this._qwd.scaleX&&(this._qwd.scaleX=-1,this._qwd.x=this._qwd.x+this._qwd.width)),this._cardX=t,this._move=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame0,this))},e.prototype.onEnterFrame0=function(t){var e=this;this._left?(this._qwd.x-=this._speedX,this._qwd.x<=this._cardX&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame0,this),this._qwd.gotoAndStop(1),this._move=!1,this._question.answer?this._stars.add():this._loves.cut(),setTimeout(function(){return e._qwd.gotoAndStop(0),e._index++,10==e._index?(e._question.visible=!1,e._qwd.visible=!1,e.addChild(e._loves),e.addChild(e._stars),e.addChild(e._qwd),e._topSp.visible=!0,e._topSp.getChildByName("caidai").visible=!0,e._topSp.getChildByName("successStar").visible=!0,e._topSp.getChildByName("tryAgain").visible=!0,e._topSp.getChildByName("qwd2").visible=!0,e._question.reset(),void e.m_bgSound.clear()):void e._question.createQuestion(e._index)},500))):(this._qwd.x+=this._speedX,this._qwd.x>=this._cardX+270&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame0,this),this._qwd.gotoAndStop(1),this._move=!1,this._question.answer?this._stars.add():this._loves.cut(),setTimeout(function(){return e._qwd.gotoAndStop(0),e._index++,e._index>=10?(e._question.visible=!1,e._qwd.visible=!1,e.addChild(e._loves),e.addChild(e._stars),e.addChild(e._qwd),e._topSp.visible=!0,e._topSp.getChildByName("caidai").visible=!0,e._topSp.getChildByName("successStar").visible=!0,e._topSp.getChildByName("tryAgain").visible=!0,e._topSp.getChildByName("qwd2").visible=!0,e._question.reset(),void e.m_bgSound.clear()):void e._question.createQuestion(e._index)},500))),egret.log(t.target)},e.prototype.onStartBtnClick=function(t){this.m_bgSound.clear(),this.m_bgSound.playRes("bgmusic_mp3",0,.1);var e=function(){this._question.createQuestion(this._index)};this._startBG.visible&&egret.Tween.get(this._startBG).to({alpha:0,visible:!1},800).call(e,this)},e}(egret.Sprite);__reflect(Adventurer.prototype,"Adventurer");var Bg=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=Source.createBitmapByName("bg_png");this.addChild(t),this._cloud1=Source.createBitmapByName("cloud1_png"),this.addChild(this._cloud1),this._cloud1.scaleX=this._cloud1.scaleY=1.2,this._cloud1.x=1066.6,this._cloud1.y=106.7-100,this._cloud2=Source.createBitmapByName("cloud2_png"),this.addChild(this._cloud2),this._cloud2.alpha=.8,this._cloud2.x=-240,this._cloud2.y=102,this._cloud3=Source.createBitmapByName("cloud3_png"),this.addChild(this._cloud3),this._cloud3.scaleX=this._cloud3.scaleY=.8,this._cloud3.alpha=.5,this._cloud3.x=1366,this._cloud3.y=155;var e=Source.createBitmapByName("bg0_png");this.addChild(e),this.start()},e.prototype.start=function(){egret.Tween.get(this._cloud1,{loop:!0}).to({x:-240},6e4,egret.Ease.sineIn).to({x:1366.6},0,egret.Ease.sineIn).wait(5e3).to({x:1066.6},36e3,egret.Ease.sineIn),egret.Tween.get(this._cloud2,{loop:!0}).to({x:1366},6e4,egret.Ease.sineIn).to({x:1366.6},0,egret.Ease.sineIn).wait(8e3),egret.Tween.get(this._cloud3,{loop:!0}).wait(2e3).to({x:-240},6e4,egret.Ease.sineIn).wait(2e3)},e.prototype.stop=function(){egret.Tween.removeTweens(this._plane),egret.Tween.removeTweens(this._cloud1),egret.Tween.removeTweens(this._cloud2),egret.Tween.removeTweens(this._cloud3)},e}(egret.Sprite);__reflect(Bg.prototype,"Bg");var DropCards=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){for(var t=0;t<e.NUM;t++){var i=new DropCard;this.addChild(i),i.name="card_"+t,i.setType(t),i.x=200+308*t,i.y=-150}},e.prototype.setType=function(t){void 0===t&&(t=0);for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!1},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.getChildren=function(t){return this.getChildAt(t)},e.prototype.init=function(t){for(var e=this,i=0,s=0;s<t.length;s++){var o=this.getChildAt(s);o.add(t[s]),o.name=t[s].name,o.x=200+308*s,o.y=-150,o.visible=!0,egret.Tween.get(o).wait(100*s).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){i++,i>=e.numChildren&&e.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})}},e.prototype.next=function(t,e,i){for(var s=this,o=0,n=function(n){var a=r.getChildAt(n);n==e?(a.visible=!0,egret.Tween.get(a).wait(100*n).to({},500,egret.Ease.backOut).wait(i).to({y:-300},0).call(function(){a.visible=!0,a.add(t[n]),a.name=t[n].name}).wait(100*n).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){o++,o>=s.numChildren&&s.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})):egret.Tween.get(a).wait(100*n).to({y:1200},500,egret.Ease.backOut).wait(i).to({y:-300},0).call(function(){a.visible=!0,a.add(t[n]),a.name=t[n].name}).wait(100*n).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){o++,o>=s.numChildren&&s.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})},r=this,a=0;a<t.length;a++)n(a)},e.NUM=3,e}(egret.Sprite);__reflect(DropCards.prototype,"DropCards");var Gun=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("炮弹底座下_png");this.addChild(t),t.anchorOffsetX=12.95,t.anchorOffsetY=-169.65,this._barrel_sp=new egret.Sprite,this.addChild(this._barrel_sp),this._barrel_sp.x=74,this._barrel_sp.y=198,this._barrel=this.createBitmapByName("大炮_png"),this._barrel_sp.addChild(this._barrel),this._barrel.anchorOffsetX=74,this._barrel.anchorOffsetY=198;var e=this.createBitmapByName("炮弹底座上_png");this.addChild(e),e.anchorOffsetX=-22.05,e.anchorOffsetY=-180.25;var i=this.createBitmapByName("炮弹火花_png");this._barrel_sp.addChild(i),i.name="huohua",i.visible=!1,i.x=-70,i.y=-290},e.prototype.setRotate=function(t){egret.Tween.get(this._barrel_sp).to({rotation:90+t},300)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.showHuohua=function(){var t=this;this._barrel_sp.getChildByName("huohua").visible=!0,setTimeout(function(){t._barrel_sp.getChildByName("huohua").visible=!1},200)},e}(egret.Sprite);__reflect(Gun.prototype,"Gun");var MoveCard=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){},e}(egret.Sprite);__reflect(MoveCard.prototype,"MoveCard");var Qieadi=function(t){function e(){var e=t.call(this)||this;return e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){this._qwd=new egret.Sprite,this.addChild(this._qwd),this._qwd.y=24;var t=this.createBitmapByName("qwd_png");this._qwd.addChild(t);var e=this.createBitmapByName("qwd2_png");this._qwd.addChild(e),this._net=new egret.Sprite,this.addChild(this._net),this._net.x=204,this._net.y=-138;var i=this.createBitmapByName("net_png");this._net.addChild(i),i.x=-25;var s=this.createBitmapByName("net2_png");this._net.addChild(s),s.x=-209,s.y=-165,this.addChild(this._qwd),this.gotoAndStop(0)},e.prototype.gotoAndStop=function(t){for(var e=0;e<this._qwd.numChildren;e++)this._qwd.getChildAt(e).visible=!1;this._qwd.getChildAt(t).visible=!0;for(var e=0;e<this._net.numChildren;e++)this._net.getChildAt(e).visible=!1;this._net.getChildAt(t).visible=!0},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(Qieadi.prototype,"Qieadi");var Source=function(){function t(){}return t.init=function(){var e=RES.getRes(Main.sourceName+"_json");this.list=e.items;for(var i=0;i<e.items.length;i++){var s=e.items[i].img,o=new egret.Bitmap(RES.getRes(s));o.width=o.height=200;var n=e.items[i].name;o.name=n,this.images.push(o)}for(var r=0;r<t.NUM;r++){for(var a=[],h=0;h<this.images.length;h++)a.push(h);this.questionList.push(this.getQuestion(r%this.images.length,a))}},t.reArrange=function(){this.questionList=[];for(var e=0;e<t.NUM;e++){for(var i=[],s=0;s<this.images.length;s++)i.push(s);egret.log(e%this.images.length),this.questionList.push(this.getQuestion(e%this.images.length,i))}},t.getQuestion=function(e,i){var s=[];s.push(i[e]),i.splice(e,1);for(var o=0;o<t.LEN-1;o++){var n=Math.floor(Math.random()*(i.length-o));0>n&&(n=0),s.push(i[n]),i.splice(n,1)}for(var r=[],a=s.length,h=0;a>h;h++){var l=Math.floor(Math.random()*(a-h));0>l&&(l=0),r.push(s[l]),s.splice(l,1)}return r
},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.NUM=10,t.LEN=3,t.images=[],t.questionList=[],t}();__reflect(Source.prototype,"Source");var BitmapBlink=function(t){function e(e,i,s){void 0===s&&(s=!0);var o=t.call(this)||this;return o._target=e,o._time=i,s&&o.start(),o}return __extends(e,t),e.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},e.prototype.runDown=function(t){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},e.prototype.runUp=function(t){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},e.prototype.checkOver=function(){var t=egret.getTimer();return t-this._currTime>=this._time?(this.destroy(),!0):!1},e.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},e}(egret.EventDispatcher);__reflect(BitmapBlink.prototype,"BitmapBlink");var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=PublicTool.stageHeight/2,e?i.textColor=PublicTool.TextColors.red:i.textColor=PublicTool.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=PublicTool.stageWidth/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,PublicTool.topSP.contains(i)||PublicTool.topSP.addChild(i);var s=function(){PublicTool.topSP.contains(i)&&(PublicTool.topSP.removeChild(i),i=null)},o=function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(o,this)}function i(t,e,i){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===i&&(i=!0);var s=new egret.TextField;s.size=24,s.y=PublicTool.stageHeight/2,e?s.textColor=PublicTool.TextColors.red:s.textColor=PublicTool.TextColors.green,s.alpha=0,s.text=t,s.strokeColor=0,i?s.x=-s.width:s.x=PublicTool.stageWidth,s.stroke=2,s.bold=!0,s.textAlign=egret.HorizontalAlign.CENTER,PublicTool.topSP.contains(s)||PublicTool.topSP.addChild(s),i?egret.Tween.get(s).to({x:PublicTool.stageWidth/2-s.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(s).to({x:PublicTool.stageWidth/2-s.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(s).to({x:s.x+100},500):egret.Tween.get(s).to({x:s.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(s).to({x:PublicTool.stageWidth},300,egret.Ease.sineIn):egret.Tween.get(s).to({x:-s.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){PublicTool.topSP.contains(s)&&(PublicTool.topSP.removeChild(s),s=null)},this,1100)}function s(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=44,i.y=PublicTool.stageHeight/2-150,e?i.textColor=PublicTool.TextColors.white:i.textColor=PublicTool.TextColors.golden,i.alpha=0,i.text=t,i.strokeColor=0,i.x=PublicTool.stageWidth/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,PublicTool.topSP.contains(i)||PublicTool.topSP.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=0,i.scaleY=0;var s=function(){PublicTool.topSP.contains(i)&&(PublicTool.topSP.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)},this,1e3)}function o(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=PublicTool.stageHeight/2,e?i.textColor=PublicTool.TextColors.red:i.textColor=PublicTool.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=PublicTool.stageWidth/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,PublicTool.topSP.contains(i)||PublicTool.topSP.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=4,i.scaleY=4;var s=function(){PublicTool.topSP.contains(i)&&(PublicTool.topSP.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=i,t.showTipsFromCenter=s,t.showTipsBigToSmall=o}(TipsUtils||(TipsUtils={}));