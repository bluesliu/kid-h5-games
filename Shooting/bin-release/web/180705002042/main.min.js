var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),StepType;!function(t){t[t.wait=0]="wait",t[t.exec=1]="exec",t[t.block=2]="block"}(StepType||(StepType={}));var Step=function(){function t(){this.m_taskList=[]}return t.prototype.wait=function(t){var e=this;return this.m_taskList.push({type:StepType.wait,data:t}),egret.setTimeout(function(){e.check()},this,0),this},t.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.block=function(t,e){var i=this;return this.m_taskList.push({type:StepType.block,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},t.prototype.next=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.check()},t.prototype.clear=function(){this.m_waitting=!1,egret.clearTimeout(this.m_timeId),this.m_taskList.length=0},t.prototype.check=function(){if(!this.m_waitting&&this.m_taskList.length>0){var t=this.m_taskList.shift();this.checkTask(t)}},t.prototype.checkTask=function(t){t.type==StepType.wait?this.doWait(t):t.type==StepType.exec?this.doExec(t):t.type==StepType.block&&this.doBlock(t)},t.prototype.doWait=function(t){var e=this,i=t.data;this.m_waitting=!0,this.m_timeId=egret.setTimeout(function(){e.m_waitting=!1,e.check()},this,i)},t.prototype.doExec=function(t){var e=t.data.func,i=t.data.thisObj;e.call(i),this.check()},t.prototype.doBlock=function(t){this.m_waitting=!0;var e=t.data.func,i=t.data.thisObj;e.call(i)},t}();__reflect(Step.prototype,"Step");var Workflow=function(){function t(){this.m_step=new Step,this.m_list=[]}return t.prototype.addWait=function(t){this.m_list.push({type:StepType.wait,data:t})},t.prototype.addExec=function(t,e){this.m_list.push({type:StepType.exec,data:{func:t,thisObj:e}})},t.prototype.addBlock=function(t,e){this.m_list.push({type:StepType.block,data:{func:t,thisObj:e}})},t.prototype.run=function(){this.m_step.clear();for(var t=0;t<this.m_list.length;t++){var e=this.m_list[t];e.type==StepType.wait?this.m_step.wait(e.data):e.type==StepType.exec?this.m_step.exec(e.func,e.thisObj):e.type==StepType.block&&this.m_step.block(e.func,e.thisObj)}},t.prototype.next=function(){this.m_step.next()},t}();__reflect(Workflow.prototype,"Workflow");var CountLoves=function(t){function e(){var e=t.call(this)||this;return e.count=3,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("love_panel_png");this.addChild(t);var i=this.createBitmapByName("love_png");this.addChild(i),i.name="love",i.anchorOffsetX=-25,i.anchorOffsetY=-14,this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.name="mask",this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),this._topMask.anchorOffsetX=-25,this._topMask.anchorOffsetY=-14,i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=e.NUM||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.reset=function(){this.count=e.NUM,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.MOVEDIS=74,e.NUM=3,e}(egret.Sprite);__reflect(CountLoves.prototype,"CountLoves");var Main=function(t){function e(){var e=t.call(this)||this;return e._loadCount=0,e._speedY=40,e._count=0,e._resultArr=[0,2,3,1,2,0,0,2,1,3],e._countArr=[],e.isResourceLoadEnd=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.loadingView.x=(this.stage.stageWidth-this.loadingView.width)/2,this.loadingView.y=(this.stage.stageHeight-this.loadingView.height)/2,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onSceneLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onSceneLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this);var i,s=GetRequestObject();return null==s?void Println("请求数据为null，无法加载相应单元的数据"):null==s.assetsName||void 0==s.assetsName||""==s.assetsName?void Println("请求的assetsName为null，无法加载相应单元的数据"):(i=s.assetsName,e.sourceName=i,void RES.loadGroup(i))},e.prototype.onUnitLoadComplete=function(t){this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUnitLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,Source.init(),this.startCreateScene()},e.prototype.onItemLoadError=function(t){Println("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){Println("Group:"+t.groupName+" has failed to load"),this.onSceneLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.stage.maxTouches=1;var t=this.stage.stageWidth,e=this.stage.stageHeight;this._bg=new Bg,this.addChild(this._bg),this._bullet=Source.createBitmapByName("炮弹_png"),this.addChild(this._bullet),this._bullet.x=681,this._bullet.y=957,this._bullet.anchorOffsetX=17.5,this._bullet.anchorOffsetY=23,this._gun=new Gun,this.addChild(this._gun),this._gun.x=607,this._gun.y=759,this._cards=new DropCards,this.addChild(this._cards);var i=Source.createBitmapByName("success_2_png"),s=Source.createBitmapByName("success_1_png"),o=Source.createBitmapByName("fail_2_png");this._tryAgain=Source.createBitmapByName("fail_0_png"),this._loves=new CountLoves,this.addChild(this._loves),this._loves.x=200,this._loves.y=16,this._stars=new CountStars,this.addChild(this._stars),this._stars.x=755,this._stars.y=24,this._qwd=new Qieadi,this.addChild(this._qwd),this._qwd.x=798,this._qwd.y=695,this._next=Source.createBitmapByName("next_png"),this.addChild(this._next),this._next.$touchEnabled=!0,this._next.x=this.stage.stageWidth-this._next.width-50,this._next.y=940,this._next.visible=!1,this.m_repeatBtn=Source.createBitmapByName("repeat_png"),this.addChild(this.m_repeatBtn),this.m_repeatBtn.$touchEnabled=!0,this.m_repeatBtn.x=this._next.x,this.m_repeatBtn.y=this._next.y-90,this.m_repeatBtn.visible=!1,this._topSp=new egret.Sprite,this.addChild(this._topSp),this._topSp.graphics.beginFill(0,.5),this._topSp.graphics.drawRect(0,0,1366,1024),this._topSp.graphics.endFill(),this._topSp.visible=!1,this._topSp.$touchEnabled=!0,this._topSp.addChild(i),i.name="caidai",i.y=68.48,i.visible=!1,this._topSp.addChild(s),s.name="successStar",s.x=324,s.y=157,s.visible=!1,s.touchEnabled=!0,this._topSp.addChild(o),o.name="failStar",o.x=324,o.y=157,o.visible=!1,this._topSp.addChild(this._tryAgain),this._tryAgain.name="tryAgain",this._tryAgain.x=568,this._tryAgain.y=787,this._tryAgain.visible=!1,this._tryAgain.$touchEnabled=!0,this._start=Source.createBitmapByName("start_png"),this.addChild(this._start),this._start.$touchEnabled=!0,this._start.x=.5*(t-this._start.width),this._start.y=.5*(e-this._start.height),this.m_tipsSound=new SoundPlayer,this._timer=new egret.Timer(1e4,0),this.initListener(),this.m_bgSound=new SoundPlayer,this.m_gunSound=new SoundPlayer,this._topSp.visible=!0},e.prototype.initListener=function(){this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this._cards.addEventListener(egret.Event.COMPLETE,this.boxShow,this),this._tryAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replay,this),this._start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.start,this),this._topSp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStopEvent,this),this._next.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapSuccessStar,this),this.m_repeatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.repeat,this)},e.prototype.onStopEvent=function(t){t.stopImmediatePropagation()},e.prototype.onTapSuccessStar=function(t){t.stopImmediatePropagation(),NextLevel()},e.prototype.replay=function(t){t.stopImmediatePropagation(),Source.reArrange(),this._topSp.visible=!1;for(var e=0;e<this._topSp.numChildren;e++)this._topSp.getChildAt(e).visible=!1;this.m_bgSound.clear(),this.m_bgSound.playRes("bgmusic_mp3",0,.1),this._qwd.gotoAndStop(0),this._count=0,this._countArr=[],this._loves.reset(),this._stars.reset(),this._next.visible=!1,this.m_repeatBtn.visible=!0,this.start()},e.prototype.boxShow=function(){this._clickEnable=!0,this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTouchBegin,this)},e.prototype.start=function(){this._topSp.visible=!1,this._start.visible=!1,this.m_repeatBtn.visible=!0,this.m_tipsSound.clear(),this.m_tipsSound.playRes(Source.list[this._count%Source.images.length].audio);for(var t=[],e=0;e<Source.images.length;e++)t.push(Source.images[Source.questionList[this._count][e]]);this._cards.init(t),this._timer.start(),this.m_bgSound.playRes("bgmusic_mp3",0,.1)},e.prototype.timerFunc=function(t){this.repeat(null)},e.prototype.repeat=function(t){void 0===t&&(t=null),null!=t&&t.stopImmediatePropagation(),this._timer.reset(),this.m_tipsSound.clear(),this.m_tipsSound.playRes(Source.list[this._count%Source.images.length].audio)},e.prototype.next=function(){var t=this;if(this._clickEnable=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageTouchBegin,this),void 0==this._countArr[this._count]&&(this._loves.cut(),0==this._loves.count))return setTimeout(function(){t.addChild(t._loves),t.addChild(t._stars),t.addChild(t._qwd),t.addChild(t._next),t._topSp.visible=!0,t._topSp.getChildByName("failStar").visible=!0,t._topSp.getChildByName("tryAgain").visible=!0,t._qwd.gotoAndStop(2),t.m_bgSound.clear()},200),void this._timer.stop();if(this._count++,this._count>=Source.NUM)return console.log("提交胜利... ..."),GameOver(!0,function(){console.log("提交胜利complete")}),this._next.visible=0==GetRequestObject().taskId,this.m_repeatBtn.visible=!1,this._timer.stop(),void setTimeout(function(){t.addChild(t._loves),t.addChild(t._stars),t.addChild(t._qwd),t.addChild(t._next),t._topSp.visible=!0,t._topSp.getChildByName("caidai").visible=!0,t._topSp.getChildByName("successStar").visible=!0,t._topSp.getChildByName("tryAgain").visible=!0,t._qwd.gotoAndStop(1),t.m_bgSound.clear()},200);for(var e=[],i=0;i<Source.images.length;i++)e.push(Source.images[Source.questionList[this._count][i]]);var s=-1==this.rightIndex?1500:4e3;this._cards.next(e,this.rightIndex,s-1500),setTimeout(function(){t._qwd.gotoAndStop(0),t.m_tipsSound.clear(),t.m_tipsSound.playRes(Source.list[t._count%Source.images.length].audio)},s)},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.onStageTouchBegin=function(t){var e=this;this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageTouchBegin,this),this._speedX=-this._speedY*(t.stageX-(this._gun.x+74))/(this._gun.y+198-t.stageY);var i=180*-Math.atan2(this._gun.y+198-t.stageY,t.stageX-(this._gun.x+74))/Math.PI;this._gun.setRotate(i),this._bullet.rotation=90+i,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),setTimeout(function(){e._gun.showHuohua()},100)},e.prototype.onEnterFrame=function(t){var e=this;if(this._bullet.y>0){this._bullet.y-=this._speedY,this._bullet.x-=this._speedX;for(var i=0;4>i;i++){var s=this._cards.getChildren(i),o=s.hitTestPoint(this._bullet.x,this._bullet.y,!0);if(o&&s.visible&&this._clickEnable){if(this.m_gunSound.clear(),this.m_gunSound.playRes("8367_mp3"),this._bullet.visible=!1,this.rightIndex=Source.questionList[this._count].indexOf(this._count%Source.images.length),egret.log("this.rightIndex:",this.rightIndex),s.name==this.getCurQuestionName())this._countArr[this._count]=1,this._stars.add(),this._qwd.gotoAndStop(4);else if(this.rightIndex=-1,s.visible=!1,this._countArr[this._count]=0,this._loves.cut(),this._qwd.gotoAndStop(3),0==this._loves.count)return console.log("提交失败... ..."),GameOver(!1,function(){console.log("提交失败complete")}),this.m_repeatBtn.visible=!1,setTimeout(function(){e.addChild(e._loves),e.addChild(e._stars),e.addChild(e._qwd),e.addChild(e._next),e._topSp.visible=!0,e._topSp.getChildByName("failStar").visible=!0,e._topSp.getChildByName("tryAgain").visible=!0,e._qwd.gotoAndStop(2),e.m_bgSound.clear()},200),this._timer.stop(),void this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageTouchBegin,this);setTimeout(function(){e._timer.reset(),e._timer.start(),e.next()},500),this._bullet.visible=!0,this._bullet.x=681,this._bullet.y=957,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)}}}else void 0==this._countArr[this._count]&&this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTouchBegin,this),this._bullet.visible=!0,this._bullet.x=681,this._bullet.y=957,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},e.prototype.getCurQuestionName=function(){return Source.list[this._count%Source.images.length].name},e.sourceName="",e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SoundPlayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.exec=function(t,e){var i=this;return this.m_taskList.push({type:StepType.exec,data:{func:t,thisObj:e}}),egret.setTimeout(function(){i.check()},this,0),this},e.prototype.playRes=function(t,e,i){var s=this;void 0===e&&(e=1),void 0===i&&(i=1),Println("playRes key:"+t+" loop:"+e+" volume:"+i);var o={type:"playRes",data:{key:t,loop:e,volume:i}};return this.m_waitting?(this.m_taskList.push(o),egret.setTimeout(function(){s.check()},this,0)):this.doPlayRes(o),this},e.prototype.checkTask=function(e){t.prototype.checkTask.call(this,e),"playRes"==e.type&&this.doPlayRes(e)},e.prototype.doPlayRes=function(t){this.m_waitting=!0;var e=t.data.key;this._loop=t.data.loop,this._volume=t.data.volume,this.stopSound(),this._sound=RES.getRes(e),this._channel=this._sound.play(0,this._loop),this._channel.volume=this._volume,this._channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),Println("doPlayRes key:"+e+" sound:"+this._sound)},e.prototype.stopSound=function(){this._channel&&(this._channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this._channel.stop(),this._channel=null)},e.prototype.onPlayComplete=function(t){this.stopSound(),this.m_waitting=!1,this.check()},e.prototype.clear=function(){t.prototype.clear.call(this),this.stopSound()},e}(Step);__reflect(SoundPlayer.prototype,"SoundPlayer");var DropCard=function(t){function e(){var e=t.call(this)||this;return e.count=3,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("yellow_box_png"),e=this.createBitmapByName("violet_box_png"),i=this.createBitmapByName("blue_box_png"),s=this.createBitmapByName("red_box_png");this.addChildCenter(t),this.addChildCenter(e),this.addChildCenter(i),this.addChildCenter(s)},e.prototype.addChildCenter=function(t){t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t)},e.prototype.setType=function(t){void 0===t&&(t=0);for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!0},e.prototype.add=function(t){for(;this.numChildren>4;)this.removeChildAt(4);t.width=t.height=150,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(DropCard.prototype,"DropCard");var Bg=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=Source.createBitmapByName("天空_png");this.addChild(t),this._plane=Source.createBitmapByName("飞机_png"),this.addChild(this._plane),this._plane.x=-121,this._plane.y=244,this._cloud1=Source.createBitmapByName("云_png"),this.addChild(this._cloud1),this._cloud1.scaleX=this._cloud1.scaleY=1.2,this._cloud1.x=1066.6,this._cloud1.y=106.7,this._cloud2=Source.createBitmapByName("云_png"),this.addChild(this._cloud2),this._cloud2.alpha=.8,this._cloud2.x=-240,this._cloud2.y=202,this._cloud3=Source.createBitmapByName("云_png"),this.addChild(this._cloud3),this._cloud3.scaleX=this._cloud3.scaleY=.8,this._cloud3.alpha=.5,this._cloud3.x=1366,this._cloud3.y=255;var e=Source.createBitmapByName("草地_png");this.addChild(e),e.y=192.45,this.start()},e.prototype.start=function(){egret.Tween.get(this._plane,{loop:!0}).to({x:1780,y:76},4e4,egret.Ease.sineIn).wait(1e4),egret.Tween.get(this._cloud1,{loop:!0}).to({x:-240},6e4,egret.Ease.sineIn).to({x:1366.6},0,egret.Ease.sineIn).wait(5e3).to({x:1066.6},36e3,egret.Ease.sineIn),egret.Tween.get(this._cloud2,{loop:!0}).to({x:1366},6e4,egret.Ease.sineIn).to({x:1366.6},0,egret.Ease.sineIn).wait(8e3),egret.Tween.get(this._cloud3,{loop:!0}).wait(2e3).to({x:-240},6e4,egret.Ease.sineIn).wait(2e3)},e.prototype.stop=function(){egret.Tween.removeTweens(this._plane),egret.Tween.removeTweens(this._cloud1),egret.Tween.removeTweens(this._cloud2),egret.Tween.removeTweens(this._cloud3)},e}(egret.Sprite);__reflect(Bg.prototype,"Bg");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var CountStars=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){var t=this.createBitmapByName("gstars_png");this.addChild(t);var i=this.createBitmapByName("stars_png");this.addChild(i),this._topMask=new egret.Shape,this.addChild(this._topMask),this._topMask.graphics.beginFill(0,1),this._topMask.graphics.drawRect(0,0,e.MOVEDIS*e.NUM,51),this._topMask.graphics.endFill(),i.mask=this._topMask,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.prototype.add=function(){this.count>=10||(this.count++,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.cut=function(){this.count<=0||(this.count--,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.reset=function(){this.count=0,this._topMask.x=(this.count-e.NUM)*e.MOVEDIS},e.NUM=10,e.MOVEDIS=60,e}(egret.Sprite);__reflect(CountStars.prototype,"CountStars");var DropCards=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){for(var t=0;t<e.NUM;t++){var i=new DropCard;this.addChild(i),i.name="card_"+t,i.setType(t),i.x=200+308*t,i.y=-150}},e.prototype.setType=function(t){void 0===t&&(t=0);for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!1},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.getChildren=function(t){return this.getChildAt(t)},e.prototype.init=function(t){for(var e=this,i=0,s=0;s<t.length;s++){var o=this.getChildAt(s);o.add(t[s]),o.name=t[s].name,o.x=200+308*s,o.y=-150,o.visible=!0,egret.Tween.get(o).wait(100*s).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){i++,i>=e.numChildren&&e.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})}},e.prototype.next=function(t,e,i){for(var s=this,o=0,n=function(n){var a=r.getChildAt(n);n==e?(a.visible=!0,egret.Tween.get(a).wait(100*n).to({},500,egret.Ease.backOut).wait(i).to({y:-300},0).call(function(){a.visible=!0,a.add(t[n]),a.name=t[n].name}).wait(100*n).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){o++,o>=s.numChildren&&s.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})):egret.Tween.get(a).wait(100*n).to({y:1200},500,egret.Ease.backOut).wait(i).to({y:-300},0).call(function(){a.visible=!0,a.add(t[n]),a.name=t[n].name}).wait(100*n).to({y:250+150*Math.random()},500,egret.Ease.cubicIn).call(function(){o++,o>=s.numChildren&&s.dispatchEvent(new egret.Event(egret.Event.COMPLETE))})},r=this,a=0;a<t.length;a++)n(a)},e.NUM=4,e}(egret.Sprite);__reflect(DropCards.prototype,"DropCards");var Gun=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=this.createBitmapByName("炮弹底座下_png");this.addChild(t),t.anchorOffsetX=12.95,t.anchorOffsetY=-169.65,this._barrel_sp=new egret.Sprite,this.addChild(this._barrel_sp),this._barrel_sp.x=74,this._barrel_sp.y=198,this._barrel=this.createBitmapByName("大炮_png"),this._barrel_sp.addChild(this._barrel),this._barrel.anchorOffsetX=74,this._barrel.anchorOffsetY=198;var e=this.createBitmapByName("炮弹底座上_png");this.addChild(e),e.anchorOffsetX=-22.05,e.anchorOffsetY=-180.25;var i=this.createBitmapByName("炮弹火花_png");this._barrel_sp.addChild(i),i.name="huohua",i.visible=!1,i.x=-70,i.y=-290},e.prototype.setRotate=function(t){egret.Tween.get(this._barrel_sp).to({rotation:90+t},300)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createDisobj=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++)e.addChild(t[i]);return e},e.prototype.showHuohua=function(){var t=this;this._barrel_sp.getChildByName("huohua").visible=!0,setTimeout(function(){t._barrel_sp.getChildByName("huohua").visible=!1},200)},e}(egret.Sprite);__reflect(Gun.prototype,"Gun");var Qieadi=function(t){function e(){var e=t.call(this)||this;return e.initContent(),e}return __extends(e,t),e.prototype.initContent=function(){var t=this.createBitmapByName("奇瓦迪_png"),e=this.createBitmapByName("success_0_png"),i=this.createBitmapByName("fail_1_png"),s=this.createBitmapByName("qwd2_png"),o=this.createBitmapByName("qwd3_png");this.addChild(t),this.addChild(e),e.x=45,e.y=-66,this.addChild(e),e.visible=!1,e.x=45,e.y=-66,this.addChild(i),i.visible=!1,i.x=87,i.y=-77,this.addChild(s),s.visible=!1,s.y=6,this.addChild(o),o.visible=!1,o.x=-19,o.y=8},e.prototype.gotoAndStop=function(t){for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this.getChildAt(t).visible=!0},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(Qieadi.prototype,"Qieadi");var Source=function(){function t(){}return t.init=function(){var e=RES.getRes(Main.sourceName+"_json");this.list=e.items;for(var i=0;i<e.items.length;i++){var s=e.items[i].img,o=new egret.Bitmap(RES.getRes(s)),n=e.items[i].name;o.name=n,this.images.push(o)}for(var r=0;r<t.NUM;r++){for(var a=[],h=0;h<this.images.length;h++)a.push(h);this.questionList.push(this.getQuestion(r%this.images.length,a))}},t.reArrange=function(){this.questionList=[];for(var e=0;e<t.NUM;e++){for(var i=[],s=0;s<this.images.length;s++)i.push(s);this.questionList.push(this.getQuestion(e%this.images.length,i))}},t.getQuestion=function(t,e){var i=[];i.push(e[t]),e.splice(t,1);for(var s=0;3>s;s++){var o=Math.floor(Math.random()*(e.length-s));0>o&&(o=0),i.push(e[o]),e.splice(o,1)}for(var n=[],r=0;4>r;r++){var a=Math.floor(Math.random()*(4-r));0>a&&(a=0),n.push(i[a]),i.splice(a,1)}return n},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.NUM=10,t.images=[],t.questionList=[],t}();__reflect(Source.prototype,"Source");